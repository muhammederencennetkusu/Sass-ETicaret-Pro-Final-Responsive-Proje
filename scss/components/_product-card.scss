// scss/components/_product-card.scss

// Gerekli modülleri yüklüyoruz
@use '../abstracts/variables' as v;
@use '../abstracts/mixins' as m;
@use "sass:color";
@use "sass:map"; // @each döngüsü için gerekli

.product-card {
    // TEMEL KAPSÜL STİLİ
    position: relative; // Etiketler için
    border: 1px solid v.$color-border;
    border-radius: v.$border-radius-base;
    padding: v.$spacing-unit;
    text-align: center;
    transition: box-shadow 0.3s ease;

    @include m.shadow-apply(light);
    transition: transform 0.2s ease, box-shadow 0.2s ease; // Yumuşak geçiş

    &:hover {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    // GÖRSEL ALAN
    &__image {
        width: 100%;
        height: 200px;
        margin-bottom: v.$spacing-unit;

    }

    // FİYAT VE İNDİRİM ETİKETLERİ İÇİN FLEX KULLANIMI
    &__prices {
        @include m.flex-center($direction: row); // Mixin ile center hizalama
        justify-content: center;
        gap: v.$spacing-unit-small;
        margin-bottom: v.$spacing-unit;
    }

    // ESKİ FİYAT (İndirimli ürünler için)
    &__price--old {
        color: v.$color-text-dark;
        text-decoration: line-through;
        opacity: 0.6;
    }

    // YENİ FİYAT
    &__price--new {
        font-weight: bold;
        color: color.adjust(v.$color-danger, $lightness: -5%); // Otomatik koyu kırmızı
    }
}


@each $name, $color in v.$state-colors {
    .product-card__tag--#{$name} {
        position: absolute;
        top: v.$spacing-unit;
        left: v.$spacing-unit;
        background-color: $color;
        color: v.$color-text-light;

        // m.button-size mixin'ini etiketler için yeniden kullanma (Kod Tekrarını Önleme)
        @include m.button-size(v.$spacing-unit-small, v.$spacing-unit, 0.75rem);

        // Stokta yok ise kartı soluk gösterme
        @if $name =='out-of-stock' {
            &~.product-card__image {
                opacity: 0.5;
            }
        }
    }
}